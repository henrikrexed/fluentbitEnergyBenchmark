{"version":11,"variables":[{"key":"namespace","type":"query","input":"fetch logs\n|summarize count() , by: {k8s.namespace.name}\n| fieldsKeep k8s.namespace.name\n","multiple":false},{"key":"podname","type":"query","input":"fetch logs\n|summarize count() , by: {k8s.pod.name}\n| fieldsKeep k8s.pod.name","multiple":false}],"tiles":{"0":{"type":"data","title":"CO2 Coal per namespace","query":"timeseries joul=sum(kepler_container_joules_total),by:{container_namespace},interval:1h, from:-24h\n| fieldsAdd co2Coal=joul[]* 0.000000277777777777778*2.23 \n| fieldsRemove joul","visualization":"areaChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}}}},"1":{"type":"data","title":"CO2 Petroleum per namespace","query":"timeseries joul=sum(kepler_container_joules_total),by:{container_namespace},interval:1h, from:-24h\n| fieldsAdd co2Coal=joul[]* 0.000000277777777777778*2.13 \n| fieldsRemove joul","visualization":"areaChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}}}},"2":{"type":"data","title":"CO2 Coal per namespace","query":"timeseries joul=sum(kepler_container_joules_total),by:{container_namespace},interval:1h, from:-24h\n| fieldsAdd co2Coal=joul[]* 0.000000277777777777778*0.91\n| fieldsRemove joul","visualization":"areaChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}}}},"3":{"type":"data","title":"Power Consumption (PKG+DRAM) / min for Top 10 Namespaces (kWh per hour)","query":"timeseries {pkg=sum(kepler_container_package_joules_total), dram=sum(kepler_container_dram_joules)}, by:{container_namespace}\n| fieldsAdd kwhusage= (pkg[]* 0.000000277777777777778)+(dram[]* 0.000000277777777777778)\n| fieldsRemove pkg,dram\n| fieldsAdd kwhusagePers=kwhusage[]/todouble(interval/1m) ","visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}}}},"4":{"type":"data","title":"Power consumption in Joule per min per Namespace","query":"  timeseries sum(kepler_container_joules_total) , alias:joulusage,by:{container_namespace}\n  | fieldsAdd totalpers=joulusage[]/todouble(interval/1m) ","visualization":"barChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}}}},"5":{"type":"data","title":"Power consumption in Joule per Pod","query":"  timeseries sum(kepler_container_joules_total) , alias:joulusage,by:{pod_name},filter: {container_namespace == $namespace}\n  | fieldsAdd totalpers=joulusage[]/todouble(interval/1m) ","visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}}}},"6":{"type":"data","title":"Power consumption in Joule per Pod","query":"  timeseries sum(kepler_container_joules_total) , alias:joulusage,by:{container_name,command},filter: {pod_name == $podname}\n  | fieldsAdd totalpers=joulusage[]/todouble(interval/1m) ","visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"absolute"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}}}},"7":{"type":"markdown","title":"","content":"**Carbon usage**\n"},"8":{"type":"markdown","title":"","content":"**Namespace usage**\n"},"9":{"type":"markdown","title":"","content":"**Pod usage of specific $namespace**\n"},"10":{"type":"markdown","title":"","content":"**Container usage of specific $podname**\n"}},"layouts":{"0":{"x":0,"y":1,"w":9,"h":6},"1":{"x":9,"y":1,"w":7,"h":6},"2":{"x":16,"y":1,"w":8,"h":6},"3":{"x":12,"y":8,"w":12,"h":6},"4":{"x":0,"y":8,"w":12,"h":6},"5":{"x":0,"y":15,"w":24,"h":6},"6":{"x":0,"y":22,"w":24,"h":6},"7":{"x":0,"y":0,"w":24,"h":1},"8":{"x":0,"y":7,"w":24,"h":1},"9":{"x":0,"y":14,"w":24,"h":1},"10":{"x":0,"y":21,"w":24,"h":1}}}